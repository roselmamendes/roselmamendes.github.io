<!DOCTYPE html>
<html lang="en">

<head>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

     <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" media="screen,projection">

    <link rel="stylesheet" href="../theme/estilo.css" media="screen,projection">

    <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <meta charset="UTF-8">

     <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->

    <!-- Place this data between the <head> tags of your website -->
  <title>Blog da Roselma Mendes</title>
  <meta name="description" content="<p>Continuando do post <a href="/tec/entrega-continua-1">capítulo 1</a>. Vou continuar falando de práticas que aprendi sobre Entrega Contínua.</p>
<p>Estou construindo um blog e usando essa construção como exemplo para o assunto.</p>
<p>Esta é a segunda parte. Se você não leu a primeira parte, aqui: <a href="/tec/entrega-continua-1">capítulo 1</a>.</p>
<p>(Antes de voltarmos a esse papo de …</p>" />

  <!-- Twitter Card data -->
  <meta name="twitter:card" value="summary">

  <!-- Open Graph data -->
  <meta property="og:title" content=""Entrega Contínua, o que aprendi - parte 2"" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="drafts/entrega-continua-o-que-aprendi-parte-2.html" />
  <meta property="og:image" content="theme/images/" />
  <meta property="og:description" content="<p>Continuando do post <a href="/tec/entrega-continua-1">capítulo 1</a>. Vou continuar falando de práticas que aprendi sobre Entrega Contínua.</p>
<p>Estou construindo um blog e usando essa construção como exemplo para o assunto.</p>
<p>Esta é a segunda parte. Se você não leu a primeira parte, aqui: <a href="/tec/entrega-continua-1">capítulo 1</a>.</p>
<p>(Antes de voltarmos a esse papo de …</p>" />

  <script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };

    return t;
  }(document, "script", "twitter-wjs"));</script>

</head>



<body>
  <div class="container brown">

<div class="row">
    <div class="col s12">
        <a href="/"><h1 class="blog-titulo">Blog da Roselma Mendes</h1></a>
    </div>
</div>
    <div class="row">

      <div class="col s12 m12">

        <div class="card">


          <div class="card-content">
            <span class="post-titulo card-title"><h1>"Entrega Contínua, o que aprendi - parte 2"</h1></span>
            <p>07 October 2017</p>
<div class="social-media">

  <a class="twitter-share-button"
     href="https://twitter.com/intent/tweet?text="Entrega Contínua, o que aprendi - parte 2"&url=drafts/entrega-continua-o-que-aprendi-parte-2.html&via=@roselmamendes"
     data-size="small">
    Tweet
  </a>
  </div>            <p>Continuando do post <a href="/tec/entrega-continua-1">capítulo 1</a>. Vou continuar falando de práticas que aprendi sobre Entrega Contínua.</p>
<p>Estou construindo um blog e usando essa construção como exemplo para o assunto.</p>
<p>Esta é a segunda parte. Se você não leu a primeira parte, aqui: <a href="/tec/entrega-continua-1">capítulo 1</a>.</p>
<p>(Antes de voltarmos a esse papo de Entrega Contínua. Um ponto. Houve alguns termos que são minhas traduções livres. Se você conhece traduções melhores comenta logo abaixo. Obrigada!)</p>
<h4>Integração Contínua</h4>
<figure>
    <img src="/images/entrega-continua/rodando-testes.png" alt="image">
    <figcaption>https://circleci.com/gh/roselmamendes/continuous-delivery-blog/14</figcaption>
</figure>

<p>Com testes bem escritos e com boa cobertura, nós garantimos que os requisitos do sistema estão satisfeitos.</p>
<p>Testes nos dão a segurança que novos códigos no fonte não mudarão funcionalidades já existentes ou garantir que novas funcionalidades façam o que se espera delas. Os testes precisam traduzir como o sistema deve funcionar.</p>
<p>"Falhe rápido, falhe frequentemente" (tradução livre-“Fail fast, fail often”)</p>
<p>Como desenvolvedoras precisamos fazer commits/pushes (Git) frequentes e pequenos, executar sempre os testes localmente antes de puxar código, executar verificações de segurança (próxima seção).</p>
<p>Um commit é uma peça de código onde todos os testes (novos e velhos) passam e <b>o código está pronto para ser usado em produção</b>.</p>
<p>Tenha uma suite de testes consistente. Como desenvolvedora pense nos possíveis cenários, de sucesso e erro, que você consegue elaborar.</p>
<p>Como time, tenham estórias consistentes, pequenas, com valor e com critérios de aceitação (acceptance criteria). Aqui um texto sobre usar <a href="http://ihd.net.br/blog/invest-estorias-dos-usuarios-metodos-ageis-gestao-projetos">I.N.V.E.S.T</a>, uma técnica para escrever estórias.</p>
<p>Use uma ferramenta de Entrega e Implantação Contínua (CI/CD em inglês-Continuous Integration e Continuous Deployment). Existem muitas opções no mercado: <a href="https://circleci.com/">Circle CI</a>, <a href="https://www.gocd.org/">Go CD</a>, <a href="https://travis-ci.org/">Travis CI</a>, <a href="https://concourse-ci.org/">Concourse CI</a>, etc. Elas ajudam a ter um lugar centralizado onde seu time pode seguir a situação do código: testes, análises de qualidade, implantação entre os ambientes, e por aí vai.</p>
<figure>
    <img src="/images/entrega-continua/circleci-build.png" alt="image">
    <figcaption>Circle CI builds</figcaption>
</figure>

<p>Com a prática da <a href="http://blog.caelum.com.br/integracao-continua/">Integração Contínua</a>, você garante a junção dos códigos vindos dos pares ou pessoas no seu time e que o código integrado está ideal para uso. Vá além dos testes unitários. Há outros tipos de testes, mais alto nível, que podem ajudar a fazer a entrega mais confiável. Alguns exemplos de tipos de testes: End to end (preferir não traduzir), Funcionais, Integração.</p>
<p>Ainda sobre testes, pesquise sobre <a href="https://www.thoughtworks.com/insights/blog/introducing-software-testing-cupcake-anti-pattern">Pirâmide de Testes e o anti padrão Ice Cream Cone</a>.</p>
<h4>Testes de segurança</h4>
<p>Como garantir que o que entregamos é seguro?</p>
<p>Três coisas que vem a minha mente: evite o <a href="https://www.thoughtworks.com/radar/techniques/security-sandwich">security sandwich</a> (infelizmente não encontrei fontes em pt-br), use a ferramenta de Entrega e Implantação Contínua para rodar os testes de segurança e <a href="http://blog.rivendel.com.br/2016/10/13/5-praticas-devops-para-aprimorar-a-seguranca-na-engenharia-de-software/">faça o ambiente para executar seus builds seguro</a>.</p>
<p>No projeto do Blog (<a href="/tec/entrega-continua-1">capítulo 1</a>), eu adicionei uma verificação nas dependências, procurando por dependências vulneráveis (<a href="https://www.npmjs.com/package/nsp">nsp</a>) e também um teste de segurança estático (<a href="https://eslint.org/">eslint</a>-não só para verificações lint, scanjs, no-unsafe-innerhtml).</p>
<p>Já que consigo usar estas verificações por linha de comando, eu posso adicioná-las junto com outras verificações em uma ferramenta de Entrega e/ou Implantação contínua. Com isso posso monitorar se um novo código não está seguro. E isso não só para mim, mas também para as pessoas que estão contribuindo/usando meu projeto.</p>
<figure>
    <img src="/images/entrega-continua/circleci-console.png" alt="image">
    <figcaption>console no circleci built para o repositório continuous-delivery-blog
</figcaption>
</figure>

<p>Pense em análise de dependências, análise de segurança <a href="https://before-you-ship.18f.gov/security/static-analysis/">estática</a> (infelizmente fontes em inglês) e <a href="https://before-you-ship.18f.gov/security/dynamic-scanning/">dinâmica</a> para seu projeto. Alguns destas análises podem ser integradas na ferramenta de Integração/Implantação Contínua.</p>
<p>Uma boa fonte sobre o assunto de segurança é o site do <a href="https://www.owasp.org/index.php/Main_Page">OWASP</a> (inglês) onde você encontra o <a href="https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project#tab=OWASP_Top_10_for_2017_Release_Candidate_1">OWASP Top 10</a> além de vários textos sobre o tema. O Top 10 consiste de uma lista das vulnerabilidades mais encontradas em sistemas pelo mundo.</p>
<p>Outras fontes em inglês: https://devops.com/automated-security-testing-continuous-delivery-pipeline/.</p>
<p>(complicado achar conteúdo em português sobre o assunto)</p>
<h4>A tal da implantação</h4>
<figure>
    <img src="/images/entrega-continua/processo-implantacao.png" alt="image">
    <figcaption>console no circleci built para o repositório continuous-delivery-blog
</figcaption>
</figure>

<p>Lembra do processo de implantação (ou deployment pipeline)?</p>
<p>Nas seções/<a href="/tec/entrega-continua-1">posts</a> anteriores lemos sobre CI, tests e análises de segurança. Isto cobre desde estágio de commit (Commit Stage) até os testes manuais (Manual Testing).</p>
<p>Agora vamos ler sobre a Entrega (Release).</p>
<p><b>Ambientes (Environments)</b></p>
<p>Também é parte de uma entrega contínua usar ferramentas como o Docker para ajudar a manter a consistência entre os vários ambientes que você implantará sua aplicação.</p>
<p>Por exemplo, ter o ambiente das desenvolvedoras idêntico ao ambiente onde são executados testes de aceitação automatizados. Isso diminui o trabalho na investigação de erros otimizando o tempo do seu time para focar no que importa: a funcionalidade. Esta não é uma boa prática somente para ambientes de testes, mas também para o de produção.</p>
<p><a href="https://devcenter.heroku.com/articles/container-registry-and-runtime">Heroku</a>, Google Cloud Platform (<a href="https://cloud.google.com/compute/docs/containers/deploying-containers">opção 1</a> e <a href="https://cloud.google.com/kubernetes-engine/">opção 2</a>) e <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html">AWS</a> provêem implantação usando Docker. (Fontes em inglês)</p>
<p>(Pretendo escrever um texto sobre Heroku com Docker. Logo mais. ;) )</p>
<p><a href="https://braziljs.org/blog/uma-breve-introducao-ao-docker-com-nodejs/">Aqui</a> um texto explicando o uso do Docker com uma aplicação NodeJS. E se for mesmo usar a ferramenta, procure por melhores práticas usando-a.</p>
<p>Muitas ferramentas por aí estão suportando Docker. Mesmo que você não a use, tenha em mente manter a consistência entre seus ambientes de implantação. <b>Eles devem ser espelhos de um e outro</b>. Talvez você se interesse por <a href="https://churrops.io/2017/09/30/ansible-por-que-ansible-e-nao-outras-ferramentas-de-gerencia-de-configuracao/">infraestrutura como código</a> (infrastructure as code).</p>
<h4>Implantando o blog</h4>
<p>Eu escolhi Heroku por ser a ferramenta que tenho mais contexto.</p>
<p>Heroku tem uma funcionalidade chamada Pipeline. Diferente de uma ferramenta como Circle, uma pipeline no Heroku é exclusivo para monitorar/disparar as implantações para uma aplicação, e não rodar verificações tipo testes.</p>
<figure>
    <img src="/images/entrega-continua/heroku-pipeline.png" alt="image">
    <figcaption>Uma pipeline para o repositório continuous-delivery-blog.</figcaption>
</figure>

<p>É possível começar uma <a href="https://devcenter.heroku.com/articles/git">implantação (deploy) no Heroku usando commandos Git</a> (inglês). Mas <b>falando em Entrega Contínua, nós precisamos pensar em automação</b>.</p>
<p>O Circle 2.0 usa o arquivo .circleci/config.yml. Então…</p>
<p>Abaixo .circleci/config.yml no repositório continuous-delivery-blog para usar o Circle.
<script src="https://gist.github.com/roselmamendes/286d8686c69b4426752bff2756acd461.js"></script></p>
<p><b>Eu não vou fazer <a href="https://www.infoq.com/br/news/2011/05/implantacao-continua">Implantação Contínua</a> (Continuous Deployment), isso significa que minha implantação em produção será manual</b>. Eu tenho um botão "On Hold" no Circle para começar a implantação no ambiente de produção.</p>
<figure>
    <img src="/images/entrega-continua/circleci-workflow.png" alt="image">
    <figcaption>Funcionalidade Workflow do Circle: https://circleci.com/workflow-run/eb07571a-eab7-48cf-a705-ae4bc56fe6a7.</figcaption>
</figure>

<p>É isso. Eu naveguei pelos conceitos que sou exposta no meu dia-a-dia:</p>
<ul>
<li>Integração Contínua: faça pushes ao master, commits pequenos, não puxe sem rodar os testes localmente, seu time deve usar uma ferramenta para Integração e Entrega Contínua;</li>
<li>Segurança: além de testes funcionais, de unidade, etc, é necessário integrar a Segurança no desenvolvimento de software. Isso significa termos verificações de segurança do sistema que estamos entregando em nossas builds/pipelines;
Onboarding: quando alguém entra no seu time, para essa pessoa já começar a contribuir, deve existir uma boa documentação e automação de como testar e executar o sistema.</li>
<li>Ambientes: é estritamente importante ter todos os ambientes com as mesmas configurações, desde do ambiente de quem desenvolve até produção. Isso evita o “funciona na minha máquina”.</li>
<li>Deploy (Implantação): a implantação do seu sistema tem que ser simples como o apertar de um botão, e você deve confiar que tudo vai ficar bem quando você aperta o botão.</li>
</ul>
<h4>Outros assuntos para ficar "ligada"</h4>
<p><a href="https://www.slideshare.net/anapauladaros/adeus-trunk-based-development-trabalhando-com-shortlived-branches-pull-requests-e-code-review-75736869">Trunk Based Development</a></p>
<p><a href="https://www.linkedin.com/pulse/continuous-delivery-database-krzysztof-ziomek?articleId=8641378527989497278">Database</a> (em Inglês)</p>
<p><a href="https://medium.com/@roselmamendes/logs-85e35fe386c7">Logging</a> e Monitoramento</p>
<p>Repositório do blog: https://github.com/roselmamendes/continuous-delivery-blog</p>
<hr>

<p>Você usa alguma das coisas que mencionei aqui?</p>
<p>Gostaria de pedi ajuda sobre fontes em português sobre os assuntos aqui abordados. Você conhece algum? Comenta :) (rosto sorrindo)</p>
<div class="social-media">

  <a class="twitter-share-button"
     href="https://twitter.com/intent/tweet?text="Entrega Contínua, o que aprendi - parte 2"&url=drafts/entrega-continua-o-que-aprendi-parte-2.html&via=@roselmamendes"
     data-size="small">
    Tweet
  </a>
  </div>          </div>

        </div>

    </div>

  </div>
  </div>
</body>

</html>