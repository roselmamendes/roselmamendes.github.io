<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Entrega Contínua, o que aprendi - parte 2</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://roselmamendes.github.io/blog/" rel="canonical" />

  <!-- Feed -->

  <link href="https://roselmamendes.github.io/blog/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://roselmamendes.github.io/blog/theme/css/code_blocks/github.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html" rel="canonical" />

    <meta name="description" content="Já ouviu sobre Entrega Contínua? Seu time implementa essa prática?">

    <meta name="author" content="roselmamendes">

    <meta name="tags" content="automacao">
    <meta name="tags" content="segurança">
    <meta name="tags" content="CI/CD">
    <meta name="tags" content="Tecnologia">
    <meta name="tags" content="Implantação">




<!-- Open Graph -->
<meta property="og:site_name" content="Blog da Roselma Mendes"/>
<meta property="og:title" content="Entrega Contínua, o que aprendi - parte 2"/>
<meta property="og:description" content="Já ouviu sobre Entrega Contínua? Seu time implementa essa prática?"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-10-07 00:00:00-03:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://roselmamendes.github.io/blog/author/roselmamendes.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="automacao"/>
<meta property="article:tag" content="segurança"/>
<meta property="article:tag" content="CI/CD"/>
<meta property="article:tag" content="Tecnologia"/>
<meta property="article:tag" content="Implantação"/>
<meta property="og:image" content="https://roselmamendes.github.io/blog/images/entrega-continua/riri-williams.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@roselmamendes">
    <meta name="twitter:title" content="Entrega Contínua, o que aprendi - parte 2">
    <meta name="twitter:url" content="https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html">

        <meta name="twitter:image:src" content="https://roselmamendes.github.io/blog/images/entrega-continua/riri-williams.jpg">

      <meta name="twitter:description" content="Já ouviu sobre Entrega Contínua? Seu time implementa essa prática?">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Entrega Contínua, o que aprendi - parte 2",
  "headline": "Entrega Contínua, o que aprendi - parte 2",
  "datePublished": "2017-10-07 00:00:00-03:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "roselmamendes",
    "url": "https://roselmamendes.github.io/blog/author/roselmamendes.html"
  },
  "image": "https://roselmamendes.github.io/blog/images/entrega-continua/riri-williams.jpg",
  "url": "https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html",
  "description": "Já ouviu sobre Entrega Contínua? Seu time implementa essa prática?"
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://roselmamendes.github.io/blog/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Entrega Contínua, o que aprendi - parte 2</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="https://roselmamendes.github.io/blog/author/roselmamendes.html">Roselma Mendes</a>
            | <time datetime="Sat 07 October 2017">Sat 07 October 2017</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('https://roselmamendes.github.io/blog/images/entrega-continua/riri-williams.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>Continuando do post <a href="/entrega-continua-o-que-aprendi-parte-1.html">capítulo 1</a>. Vou continuar falando de práticas que aprendi sobre Entrega Contínua.</p>
<p>Estou construindo um blog e usando essa construção como exemplo para o assunto.</p>
<p>Esta é a segunda parte. Se você não leu a primeira parte, aqui: <a href="/entrega-continua-o-que-aprendi-parte-1.html">capítulo 1</a>.</p>
<p>(Antes de voltarmos a esse papo de Entrega Contínua. Um ponto. Houve alguns termos que são minhas traduções livres. Se você conhece traduções melhores comenta logo abaixo. Obrigada!)</p>
<h4>Integração Contínua</h4>
<p><img alt="https://circleci.com/gh/roselmamendes/continuous-delivery-blog/14" src="https://roselmamendes.github.io/blog/images/entrega-continua/unit-tests-on-circle.png"></p>
<p>Com testes bem escritos e com boa cobertura, nós garantimos que os requisitos do sistema estão satisfeitos.</p>
<p>Testes nos dão a segurança que novos códigos no fonte não mudarão funcionalidades já existentes ou garantir que novas funcionalidades façam o que se espera delas. Os testes precisam traduzir como o sistema deve funcionar.</p>
<p>"Falhe rápido, falhe frequentemente" (tradução livre-“Fail fast, fail often”)</p>
<p>Como desenvolvedoras precisamos fazer commits/pushes (Git) frequentes e pequenos, executar sempre os testes localmente antes de puxar código, executar verificações de segurança (próxima seção).</p>
<p>Um commit é uma peça de código onde todos os testes (novos e velhos) passam e <b>o código está pronto para ser usado em produção</b>.</p>
<p>Tenha uma suite de testes consistente. Como desenvolvedora pense nos possíveis cenários, de sucesso e erro, que você consegue elaborar.</p>
<p>Como time, tenham estórias consistentes, pequenas, com valor e com critérios de aceitação (acceptance criteria). Aqui um texto sobre usar <a href="http://ihd.net.br/blog/invest-estorias-dos-usuarios-metodos-ageis-gestao-projetos">I.N.V.E.S.T</a>, uma técnica para escrever estórias.</p>
<p>Use uma ferramenta de Entrega e Implantação Contínua (CI/CD em inglês-Continuous Integration e Continuous Deployment). Existem muitas opções no mercado: <a href="https://circleci.com/">Circle CI</a>, <a href="https://www.gocd.org/">Go CD</a>, <a href="https://travis-ci.org/">Travis CI</a>, <a href="https://concourse-ci.org/">Concourse CI</a>, etc. Elas ajudam a ter um lugar centralizado onde seu time pode seguir a situação do código: testes, análises de qualidade, implantação entre os ambientes, e por aí vai.</p>
<p><img alt="Circle CI builds" src="https://roselmamendes.github.io/blog/images/entrega-continua/circle-ci-builds.png"></p>
<p>Com a prática da <a href="http://blog.caelum.com.br/integracao-continua/">Integração Contínua</a>, você garante a junção dos códigos vindos dos pares ou pessoas no seu time e que o código integrado está ideal para uso. Vá além dos testes unitários. Há outros tipos de testes, mais alto nível, que podem ajudar a fazer a entrega mais confiável. Alguns exemplos de tipos de testes: End to end (preferir não traduzir), Funcionais, Integração.</p>
<p>Ainda sobre testes, pesquise sobre <a href="https://www.thoughtworks.com/insights/blog/introducing-software-testing-cupcake-anti-pattern">Pirâmide de Testes e o anti padrão Ice Cream Cone</a>.</p>
<h4>Testes de segurança</h4>
<p>Como garantir que o que entregamos é seguro?</p>
<p>Três coisas que vem a minha mente: evite o <a href="https://www.thoughtworks.com/radar/techniques/security-sandwich">security sandwich</a> (infelizmente não encontrei fontes em pt-br), use a ferramenta de Entrega e Implantação Contínua para rodar os testes de segurança e <a href="http://blog.rivendel.com.br/2016/10/13/5-praticas-devops-para-aprimorar-a-seguranca-na-engenharia-de-software/">faça o ambiente para executar seus builds seguro</a>.</p>
<p>No projeto do Blog (<a href="/tec/entrega-continua-1">capítulo 1</a>), eu adicionei uma verificação nas dependências, procurando por dependências vulneráveis (<a href="https://www.npmjs.com/package/nsp">nsp</a>) e também um teste de segurança estático (<a href="https://eslint.org/">eslint</a>-não só para verificações lint, scanjs, no-unsafe-innerhtml).</p>
<p>Já que consigo usar estas verificações por linha de comando, eu posso adicioná-las junto com outras verificações em uma ferramenta de Entrega e/ou Implantação contínua. Com isso posso monitorar se um novo código não está seguro. E isso não só para mim, mas também para as pessoas que estão contribuindo/usando meu projeto.</p>
<p><img alt="console no circleci built para o repositório continuous-delivery-blog" src="https://roselmamendes.github.io/blog/images/entrega-continua/circle-erro-dependency-check.png"> </p>
<p>Pense em análise de dependências, análise de segurança <a href="https://before-you-ship.18f.gov/security/static-analysis/">estática</a> (infelizmente fontes em inglês) e <a href="https://before-you-ship.18f.gov/security/dynamic-scanning/">dinâmica</a> para seu projeto. Alguns destas análises podem ser integradas na ferramenta de Integração/Implantação Contínua.</p>
<p>Uma boa fonte sobre o assunto de segurança é o site do <a href="https://www.owasp.org/index.php/Main_Page">OWASP</a> (inglês) onde você encontra o <a href="https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project#tab=OWASP_Top_10_for_2017_Release_Candidate_1">OWASP Top 10</a> além de vários textos sobre o tema. O Top 10 consiste de uma lista das vulnerabilidades mais encontradas em sistemas pelo mundo.</p>
<p>Outras fontes em inglês: https://devops.com/automated-security-testing-continuous-delivery-pipeline/.</p>
<p>(complicado achar conteúdo em português sobre o assunto)</p>
<h4>A tal da implantação</h4>
<p><img alt="console no circleci built para o repositório continuous-delivery-blog" src="https://roselmamendes.github.io/blog/images/entrega-continua/entrega-continua-1.png"></p>
<p>Lembra do processo de implantação (ou deployment pipeline)?</p>
<p>Nas seções/<a href="/tec/entrega-continua-1">posts</a> anteriores lemos sobre CI, tests e análises de segurança. Isto cobre desde estágio de commit (Commit Stage) até os testes manuais (Manual Testing).</p>
<p>Agora vamos ler sobre a Entrega (Release).</p>
<p><b>Ambientes (Environments)</b></p>
<p>Também é parte de uma entrega contínua usar ferramentas como o Docker para ajudar a manter a consistência entre os vários ambientes que você implantará sua aplicação.</p>
<p>Por exemplo, ter o ambiente das desenvolvedoras idêntico ao ambiente onde são executados testes de aceitação automatizados. Isso diminui o trabalho na investigação de erros otimizando o tempo do seu time para focar no que importa: a funcionalidade. Esta não é uma boa prática somente para ambientes de testes, mas também para o de produção.</p>
<p><a href="https://devcenter.heroku.com/articles/container-registry-and-runtime">Heroku</a>, Google Cloud Platform (<a href="https://cloud.google.com/compute/docs/containers/deploying-containers">opção 1</a> e <a href="https://cloud.google.com/kubernetes-engine/">opção 2</a>) e <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html">AWS</a> provêem implantação usando Docker. (Fontes em inglês)</p>
<p>(Pretendo escrever um texto sobre Heroku com Docker. Logo mais. ;) )</p>
<p><a href="https://braziljs.org/blog/uma-breve-introducao-ao-docker-com-nodejs/">Aqui</a> um texto explicando o uso do Docker com uma aplicação NodeJS. E se for mesmo usar a ferramenta, procure por melhores práticas usando-a.</p>
<p>Muitas ferramentas por aí estão suportando Docker. Mesmo que você não a use, tenha em mente manter a consistência entre seus ambientes de implantação. <b>Eles devem ser espelhos de um e outro</b>. Talvez você se interesse por <a href="https://churrops.io/2017/09/30/ansible-por-que-ansible-e-nao-outras-ferramentas-de-gerencia-de-configuracao/">infraestrutura como código</a> (infrastructure as code).</p>
<h4>Implantando o blog</h4>
<p>Eu escolhi Heroku por ser a ferramenta que tenho mais contexto.</p>
<p>Heroku tem uma funcionalidade chamada Pipeline. Diferente de uma ferramenta como Circle, uma pipeline no Heroku é exclusivo para monitorar/disparar as implantações para uma aplicação, e não rodar verificações tipo testes.</p>
<p><img alt="Uma pipeline para o repositório continuous-delivery-blog" src="https://roselmamendes.github.io/blog/images/entrega-continua/entrega-continua-2.png"></p>
<p>É possível começar uma <a href="https://devcenter.heroku.com/articles/git">implantação (deploy) no Heroku usando commandos Git</a> (inglês). Mas <b>falando em Entrega Contínua, nós precisamos pensar em automação</b>.</p>
<p>O Circle 2.0 usa o arquivo .circleci/config.yml. Então…</p>
<p>Abaixo .circleci/config.yml no repositório continuous-delivery-blog para usar o Circle.
<script src="https://gist.github.com/roselmamendes/286d8686c69b4426752bff2756acd461.js"></script></p>
<p><b>Eu não vou fazer <a href="https://www.infoq.com/br/news/2011/05/implantacao-continua">Implantação Contínua</a> (Continuous Deployment), isso significa que minha implantação em produção será manual</b>. Eu tenho um botão "On Hold" no Circle para começar a implantação no ambiente de produção.</p>
<p><img alt="Funcionalidade Workflow do Circle: https://circleci.com/workflow-run/eb07571a-eab7-48cf-a705-ae4bc56fe6a7" src="https://roselmamendes.github.io/blog/images/entrega-continua/circleci-workflow.png"></p>
<p>É isso. Eu naveguei pelos conceitos que sou exposta no meu dia-a-dia:</p>
<ul>
<li>Integração Contínua: faça pushes ao master, commits pequenos, não puxe sem rodar os testes localmente, seu time deve usar uma ferramenta para Integração e Entrega Contínua;</li>
<li>Segurança: além de testes funcionais, de unidade, etc, é necessário integrar a Segurança no desenvolvimento de software. Isso significa termos verificações de segurança do sistema que estamos entregando em nossas builds/pipelines;
Onboarding: quando alguém entra no seu time, para essa pessoa já começar a contribuir, deve existir uma boa documentação e automação de como testar e executar o sistema.</li>
<li>Ambientes: é estritamente importante ter todos os ambientes com as mesmas configurações, desde do ambiente de quem desenvolve até produção. Isso evita o “funciona na minha máquina”.</li>
<li>Deploy (Implantação): a implantação do seu sistema tem que ser simples como o apertar de um botão, e você deve confiar que tudo vai ficar bem quando você aperta o botão.</li>
</ul>
<h4>Outros assuntos para ficar "ligada"</h4>
<p><a href="https://www.slideshare.net/anapauladaros/adeus-trunk-based-development-trabalhando-com-shortlived-branches-pull-requests-e-code-review-75736869">Trunk Based Development</a></p>
<p><a href="https://www.linkedin.com/pulse/continuous-delivery-database-krzysztof-ziomek?articleId=8641378527989497278">Database</a> (em Inglês)</p>
<p><a href="https://medium.com/@roselmamendes/logs-85e35fe386c7">Logging</a> e Monitoramento</p>
<p>Repositório do blog: https://github.com/roselmamendes/continuous-delivery-blog</p>
<hr>

<p>Você usa alguma das coisas que mencionei aqui?</p>
<p>Gostaria de pedi ajuda sobre fontes em português sobre os assuntos aqui abordados. Você conhece algum? Comenta no twitter e me marca @roselmamendes :) (rosto sorrindo)</p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Entrega Contínua, o que aprendi - parte 2&amp;url=https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=https://roselmamendes.github.io/blog/entrega-continua-o-que-aprendi-parte-2.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://roselmamendes.github.io/blog/tag/automacao.html">automacao</a><a href="https://roselmamendes.github.io/blog/tag/seguranca.html">segurança</a><a href="https://roselmamendes.github.io/blog/tag/cicd.html">CI/CD</a><a href="https://roselmamendes.github.io/blog/tag/tecnologia.html">Tecnologia</a><a href="https://roselmamendes.github.io/blog/tag/implantacao.html">Implantação</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="https://roselmamendes.github.io/blog/images/roselma_.jpg" alt="Roselma Mendes" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="https://roselmamendes.github.io/blog/author/roselmamendes.html">Roselma Mendes</a></h4>
                            <p class="post-author-about">Feminista Negra Interseccional que ama programação e trabalha na área desde 2010. Baiana. Uma ThoughtWorker. Curte programação fullstack. Se interessa por Arquitetura de Sistemas: Entrega de Software, infra, design de aplicações, segurança, e por ai vai.</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> Recife/Brasil</span>
                            <span class="post-author-website"><a href="http://roselmamendes.github.io/blog"><i class="ic ic-link"></i> Website</a></span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-github"><a target="_blank" href="https://github.com/roselmamendes"><i class="ic ic-link"></i> GitHub</a></span>
                            <span class="post-author-twitter"><a target="_blank" href="https://twitter.com/roselmamendes"><i class="ic ic-twitter"></i> Twitter</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="https://roselmamendes.github.io/blog/theme/js/script.js"></script>

</body>
</html>